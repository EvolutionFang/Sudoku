import { userGrid } from './grid';
import { candidates } from './candidates';
import { cursor } from './cursor';
import { timer } from './timer';
import { logicalCandidates } from './logicalCandidates';

/**
 * Deep clone the board state to ensure historical records are immutable.
 * @param {Object} state - The board state object to clone.
 * @returns {Object} A deep copy of the state.
 */
export function cloneState(state) {
    return JSON.parse(JSON.stringify(state));
}

/**
 * Restore all stores to a specific snapshot state.
 * @param {Object} boardState - The snapshot containing digits, candidates, etc.
 */
export function applyFullState(boardState) {
    if (!boardState) return;

    userGrid.setFullGrid(boardState.digits);
    candidates.setFull(boardState.candidates);
    cursor.set(boardState.cursor.x, boardState.cursor.y);
    timer.set(boardState.timer);
    logicalCandidates.set(boardState.candidates_lists);
}